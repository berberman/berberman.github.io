!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Nlvi=e()}(this,function(){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function s(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,n,r;r=i[n=t],n in(e=o)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n);return i(this,r?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||t.length<e)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function y(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function b(t){return"function"==typeof t}var v=!1,m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){v=t},get useDeprecatedSynchronousErrorHandling(){return v}};function w(t){setTimeout(function(){throw t},0)}var g={closed:!0,next:function(t){},error:function(t){if(m.useDeprecatedSynchronousErrorHandling)throw t;w(t)},complete:function(){}},x=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function _(t){return null!==t&&"object"==typeof t}var S=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),E=function(){function u(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return u.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof u)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o){t[o].remove(this)}if(b(n))try{n.call(this)}catch(t){e=t instanceof S?T(t.errors):[t]}if(x(r))for(var o=-1,i=r.length;++o<i;){var s=r[o];if(_(s))try{s.unsubscribe()}catch(t){e=e||[],t instanceof S?e=e.concat(T(t.errors)):e.push(t)}}if(e)throw new S(e)}},u.prototype.add=function(t){var e,n=t;if(!t)return u.EMPTY;switch(typeof t){case"function":n=new u(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof u||(e=n,(n=new u)._subscriptions=[e]);break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof u){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},u.prototype.remove=function(t){var e,n=this._subscriptions;!n||-1!==(e=n.indexOf(t))&&n.splice(e,1)},u.EMPTY=((t=new u).closed=!0,t),u}();function T(t){return t.reduce(function(t,e){return t.concat(e instanceof S?e.errors:e)},[])}var O=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),j=function(o){function i(t,e,n){var r=o.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=g;break;case 1:if(!t){r.destination=g;break}if("object"==typeof t){t instanceof i?(r.syncErrorThrowable=t.syncErrorThrowable,(r.destination=t).add(r)):(r.syncErrorThrowable=!0,r.destination=new k(r,t));break}default:r.syncErrorThrowable=!0,r.destination=new k(r,t,e,n)}return r}return y(i,o),i.prototype[O]=function(){return this},i.create=function(t,e,n){var r=new i(t,e,n);return r.syncErrorThrowable=!1,r},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},i}(E),k=function(u){function t(t,e,n,r){var o,i=u.call(this)||this;i._parentSubscriber=t;var s=i;return b(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==g&&(b((s=Object.create(e)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=n,i._complete=r,i}return y(t,u),t.prototype.next=function(t){var e;!this.isStopped&&this._next&&(e=this._parentSubscriber,m.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t))},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=m.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):w(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;w(t)}}},t.prototype.complete=function(){var t,e,n=this;this.isStopped||(t=this._parentSubscriber,this._complete&&(e=function(){return n._complete.call(n._context)},m.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,e):this.__tryOrUnsub(e)),this.unsubscribe())},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),m.useDeprecatedSynchronousErrorHandling)throw t;w(t)}},t.prototype.__tryOrSetError=function(e,t,n){if(!m.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return m.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(w(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(j);var A=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function P(t){return t}var C=function(){function n(t){this._isScalar=!1,t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,n){var r=this.operator,o=function(t,e,n){if(t){if(t instanceof j)return t;if(t[O])return t[O]()}return t||e||n?new j(t,e,n):new j(g)}(t,e,n);if(o.add(r?r.call(o,this.source):this.source||m.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),m.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){m.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return;t=e&&e instanceof j?e:null}return 1}(e)?console.warn(t):e.error(t)}},n.prototype.forEach=function(r,t){var o=this;return new(t=I(t))(function(t,e){var n=o.subscribe(function(t){try{r(t)}catch(t){e(t),n&&n.unsubscribe()}},e,t)})},n.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},n.prototype[A]=function(){return this},n.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:(0===(e=t).length?P:1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)})(this)},n.prototype.toPromise=function(t){var r=this;return new(t=I(t))(function(t,e){var n;r.subscribe(function(t){return n=t},function(t){return e(t)},function(){return t(n)})})},n.create=function(t){return new n(t)},n}();function I(t){if(!(t=t||Promise))throw new Error("no Promise impl found");return t}var R=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.scheduler=t,n.work=e,n.pending=!1,n}return y(t,r),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},t.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},t.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(function(n){function t(t,e){return n.call(this)||this}return y(t,n),t.prototype.schedule=function(t,e){return this},t}(E)),D=function(){function n(t,e){void 0===e&&(e=n.now),this.SchedulerAction=t,this.now=e}return n.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},n.now=function(){return Date.now()},n}(),H=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}};function V(r,o){return new C(function(t){var e=new E,n=0;return e.add(o.schedule(function(){n!==r.length?(t.next(r[n++]),t.closed||e.add(this.schedule())):t.complete()})),e})}var q=new(function(r){function o(t,e){void 0===e&&(e=D.now);var n=r.call(this,t,function(){return o.delegate&&o.delegate!==n?o.delegate.now():e()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return y(o,r),o.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),o.delegate&&o.delegate!==this?o.delegate.schedule(t,e,n):r.prototype.schedule.call(this,t,e,n)},o.prototype.flush=function(t){var e,n=this.actions;if(this.active)n.push(t);else{this.active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,e){for(;t=n.shift();)t.unsubscribe();throw e}}},o}(D))(R);function L(e,n){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new M(e,n))}}var M=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new N(t,this.project,this.thisArg))},t}(),N=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.project=e,r.count=0,r.thisArg=n||r,r}return y(t,o),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(j),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(j),U=function(o){function t(t,e,n){var r=o.call(this)||this;return r.parent=t,r.outerValue=e,r.outerIndex=n,r.index=0,r}return y(t,o),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(j);function z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var B=z(),W=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function F(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var G=function(t){if(t&&"function"==typeof t[A])return o=t,function(t){var e=o[A]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(W(t))return H(t);if(F(t))return n=t,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,w),e};if(t&&"function"==typeof t[B])return r=t,function(t){for(var e=r[B]();;){var n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var r,n,o,e=_(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Y(t,e,n,r,o){if(void 0===o&&(o=new U(t,n,r)),!o.closed)return e instanceof C?e.subscribe(o):G(e)(o)}function J(t,e){if(null!=t){if((u=t)&&"function"==typeof u[A])return i=t,s=e,new C(function(e){var n=new E;return n.add(s.schedule(function(){var t=i[A]();n.add(t.subscribe({next:function(t){n.add(s.schedule(function(){return e.next(t)}))},error:function(t){n.add(s.schedule(function(){return e.error(t)}))},complete:function(){n.add(s.schedule(function(){return e.complete()}))}}))})),n});if(F(t))return r=t,o=e,new C(function(e){var n=new E;return n.add(o.schedule(function(){return r.then(function(t){n.add(o.schedule(function(){e.next(t),n.add(o.schedule(function(){return e.complete()}))}))},function(t){n.add(o.schedule(function(){return e.error(t)}))})})),n});if(W(t))return V(t,e);if((n=t)&&"function"==typeof n[B]||"string"==typeof t)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new C(function(r){var o,t=new E;return t.add(function(){o&&"function"==typeof o.return&&o.return()}),t.add(n.schedule(function(){o=e[B](),t.add(n.schedule(function(){if(!r.closed){try{var t=o.next(),e=t.value,n=t.done}catch(t){return void r.error(t)}n?r.complete():(r.next(e),this.schedule())}}))})),t})}(t,e)}var n,r,o,i,s,u;throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function K(t,e){return e?J(t,e):t instanceof C?t:new C(G(t))}function Q(t,n,r,e){return b(r)&&(e=r,r=void 0),e?Q(t,n,r).pipe(L(function(t){return x(t)?e.apply(void 0,t):e(t)})):new C(function(e){!function t(e,n,r,o,i){var s;if(d=e,d&&"function"==typeof d.addEventListener&&"function"==typeof d.removeEventListener){var u=e;e.addEventListener(n,r,i),s=function(){return u.removeEventListener(n,r,i)}}else if(f=e,f&&"function"==typeof f.on&&"function"==typeof f.off){var c=e;e.on(n,r),s=function(){return c.off(n,r)}}else if(p=e,p&&"function"==typeof p.addListener&&"function"==typeof p.removeListener){var a=e;e.addListener(n,r),s=function(){return a.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],n,r,o,i)}var p;var f;var d;o.add(s)}(t,n,function(t){e.next(1<arguments.length?Array.prototype.slice.call(arguments):t)},e,r)})}function Z(e,n){return function(t){return t.lift(new tt(e,n))}}var tt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.predicate,this.thisArg))},t}(),et=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.predicate=e,r.thisArg=n,r.count=0,r}return y(t,o),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(j);function nt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,o=t[t.length-1];return"function"==typeof o&&t.pop(),n=t,((r=void 0)?V(n,r):new C(H(n))).lift(new rt(o))}var rt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new ot(t,this.resultSelector))},t}(),ot=function(o){function t(t,e,n){void 0===n&&(n=Object.create(null));var r=o.call(this,t)||this;return r.iterators=[],r.active=0,r.resultSelector="function"==typeof e?e:null,r.values=n,r}return y(t,o),t.prototype._next=function(t){var e=this.iterators;x(t)?e.push(new st(t)):e.push("function"==typeof t[B]?new it(t[B]()):new ut(this.destination,this,t))},t.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.destination.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}for(var o=!1,i=[],r=0;r<e;r++){var s,u=(s=t[r]).next();if(s.hasCompleted()&&(o=!0),u.done)return void n.complete();i.push(u.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),o&&n.complete()},t.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(j),it=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),st=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[B]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.index<this.array.length},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),ut=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.parent=e,r.observable=n,r.stillUnsubscribed=!0,r.buffer=[],r.isComplete=!1,r}return y(t,o),t.prototype[B]=function(){return this},t.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(t,e,n,r,o){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(t,e){return Y(this,this.observable,this,e)},t}(X);var ct=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new at(t,this.dueTime,this.scheduler))},t}(),at=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.dueTime=e,r.scheduler=n,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return y(t,o),t.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(lt,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){var t;this.clearDebounce(),this.hasValue&&(t=this.lastValue,this.lastValue=null,this.hasValue=!1,this.destination.next(t))},t.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},t}(j);function lt(t){t.debouncedNext()}function ht(e,o){return"function"==typeof o?function(t){return t.pipe(ht(function(n,r){return K(e(n,r)).pipe(L(function(t,e){return o(n,t,r,e)}))}))}:function(t){return t.lift(new pt(e))}}var pt=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new ft(t,this.project))},t}(),ft=function(r){function t(t,e){var n=r.call(this,t)||this;return n.project=e,n.index=0,n}return y(t,r),t.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},t.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new U(this,e,n),i=this.destination;i.add(o),this.innerSubscription=Y(this,t,void 0,void 0,o),this.innerSubscription!==o&&i.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||r.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&r.prototype._complete.call(this)},t.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},t}(X),dt={leading:!0,trailing:!1};var yt=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new bt(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),bt=function(s){function t(t,e,n,r,o){var i=s.call(this,t)||this;return i.duration=e,i.scheduler=n,i.leading=r,i.trailing=o,i._hasTrailingValue=!1,i._trailingValue=null,i}return y(t,s),t.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(vt,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},t}(j);function vt(t){t.subscriber.clearThrottle()}var mt=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new wt(t,this.observables,this.project))},t}(),wt=function(u){function t(t,e,n){var r=u.call(this,t)||this;r.observables=e,r.project=n,r.toRespond=[];var o=e.length;r.values=new Array(o);for(var i=0;i<o;i++)r.toRespond.push(i);for(i=0;i<o;i++){var s=e[i];r.add(Y(r,s,s,i))}return r}return y(t,u),t.prototype.notifyNext=function(t,e,n,r,o){this.values[n]=e;var i,s=this.toRespond;0<s.length&&(-1!==(i=s.indexOf(n))&&s.splice(i,1))},t.prototype.notifyComplete=function(){},t.prototype._next=function(t){var e;0===this.toRespond.length&&(e=[t].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(X),gt="undefined"!=typeof window&&window,xt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_t="undefined"!=typeof global&&global,St=gt||_t||xt;function Et(t,e){return void 0===e&&(e=null),new Pt({method:"GET",url:t,headers:e})}function Tt(t,e,n){return new Pt({method:"POST",url:t,body:e,headers:n})}function Ot(t,e){return new Pt({method:"DELETE",url:t,headers:e})}function jt(t,e,n){return new Pt({method:"PUT",url:t,body:e,headers:n})}function kt(t,e,n){return new Pt({method:"PATCH",url:t,body:e,headers:n})}var $t=L(function(t,e){return t.response});function At(t,e){return $t(new Pt({method:"GET",url:t,responseType:"json",headers:e}))}var Pt=function(o){function e(t){var e=o.call(this)||this,n={async:!0,createXHR:function(){return(this.crossDomain?function(){if(St.XMLHttpRequest)return new St.XMLHttpRequest;if(St.XDomainRequest)return new St.XDomainRequest;throw new Error("CORS is not supported by your browser")}:function(){if(St.XMLHttpRequest)return new St.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(new St.ActiveXObject(t=e[n]))break}catch(t){}return new St.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}})()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)n.url=t;else for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return e.request=n,e}function t(t){return new e(t)}return y(e,o),e.prototype._subscribe=function(t){return new Ct(t,this.request)},e.create=(t.get=Et,t.post=Tt,t.delete=Ot,t.put=jt,t.patch=kt,t.getJSON=At,t),e}(C),Ct=function(o){function t(t,e){var n=o.call(this,t)||this;n.request=e,n.done=!1;var r=e.headers=e.headers||{};return e.crossDomain||n.getHeader(r,"X-Requested-With")||(r["X-Requested-With"]="XMLHttpRequest"),n.getHeader(r,"Content-Type")||St.FormData&&e.body instanceof St.FormData||void 0===e.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),e.body=n.serializeBody(e.body,n.getHeader(e.headers,"Content-Type")),n.send(),n}return y(t,o),t.prototype.next=function(t){this.done=!0;var e,n=this.xhr,r=this.request,o=this.destination;try{e=new It(t,n,r)}catch(t){return o.error(t)}o.next(e)},t.prototype.send=function(){var t=this.request,e=this.request,n=e.user,r=e.method,o=e.url,i=e.async,s=e.password,u=e.headers,c=e.body;try{var a=this.xhr=t.createXHR();this.setupEvents(a,t),n?a.open(r,o,i,n,s):a.open(r,o,i),i&&(a.timeout=t.timeout,a.responseType=t.responseType),"withCredentials"in a&&(a.withCredentials=!!t.withCredentials),this.setHeaders(a,u),c?a.send(c):a.send()}catch(t){this.error(t)}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(St.FormData&&e instanceof St.FormData)return e;var n;switch(!t||-1!==(n=t.indexOf(";"))&&(t=t.substring(0,n)),t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])},t.prototype.getHeader=function(t,e){for(var n in t)if(n.toLowerCase()===e.toLowerCase())return t[n]},t.prototype.setupEvents=function(t,e){var n,i,r=e.progressSubscriber;function s(t){var e,n=s.subscriber,r=s.progressSubscriber,o=s.request;r&&r.error(t);try{e=new Ht(this,o)}catch(t){e=t}n.error(e)}function o(t){}function u(t){var e=u.subscriber,n=u.progressSubscriber,r=u.request;if(4===this.readyState){var o=1223===this.status?204:this.status;if(0===o&&(o=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),o<400)n&&n.complete(),e.next(t),e.complete();else{n&&n.error(t);var i=void 0;try{i=new Rt("ajax error "+o,this,r)}catch(t){i=t}e.error(i)}}}(t.ontimeout=s).request=e,s.subscriber=this,s.progressSubscriber=r,t.upload&&"withCredentials"in t&&(r&&(n=function(t){n.progressSubscriber.next(t)},St.XDomainRequest?t.onprogress=n:t.upload.onprogress=n,n.progressSubscriber=r),(t.onerror=i=function(t){var e,n=i.progressSubscriber,r=i.subscriber,o=i.request;n&&n.error(t);try{e=new Rt("ajax error",this,o)}catch(t){e=t}r.error(e)}).request=e,i.subscriber=this,i.progressSubscriber=r),(t.onreadystatechange=o).subscriber=this,o.progressSubscriber=r,o.request=e,(t.onload=u).subscriber=this,u.progressSubscriber=r,u.request=e},t.prototype.unsubscribe=function(){var t=this.xhr;!this.done&&t&&4!==t.readyState&&"function"==typeof t.abort&&t.abort(),o.prototype.unsubscribe.call(this)},t}(j),It=function(){return function(t,e,n){this.originalEvent=t,this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.response=Dt(this.responseType,e)}}(),Rt=function(){function t(t,e,n){return Error.call(this),this.message=t,this.name="AjaxError",this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.response=Dt(this.responseType,e),this}return t.prototype=Object.create(Error.prototype),t}();function Dt(t,e){switch(t){case"json":return"response"in(n=e)?n.responseType?n.response:JSON.parse(n.response||n.responseText||"null"):JSON.parse(n.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}var n}var Ht=function(t,e){return Rt.call(this,"ajax timeout",t,e),this.name="AjaxTimeoutError",this},Vt=function(){return Pt.create}();function qt(t,e){var n,r,o=Vt({url:t,responseType:"xml"}).pipe(L(function(t){return t.response}),L(function(t){return t.querySelectorAll("entry")}),L(function(t){return h(t).map(function(t){return{title:t.getElementsByTagName("title")[0].textContent,url:t.getElementsByTagName("url")[0].textContent,content:t.getElementsByTagName("content")[0].textContent}})})),i=Q(document.getElementById(e),"input").pipe((n=500,void 0===r&&(r=q),function(t){return t.lift(new ct(n,r))}),L(function(t){return t.target.value.trim()}));return nt(i.pipe(L(function(t){return!!t})),i.pipe(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){var e;"function"==typeof n[n.length-1]&&(e=n.pop());return t.lift(new mt(n,e))}}(o),L(function(t){var e=p(t,2),i=e[0];return e[1].filter(function(t){var e=t.content;return 0<=t.title.indexOf(i)||0<=e.indexOf(i)}).map(function(t){var e=new RegExp("(".concat(i,")"),"gi"),n=t.title.replace(e,'<strong class="search-keyword">$1</strong>'),r=(o=t.content.replace(/<[^>]+>/g,"")).indexOf(i),o=o.slice(r<20?0:r-20,r<0?100:r+80).replace(e,'<strong class="search-keyword">$1</strong>');return s(s({},t),{},{title:n,content:o})})}))).pipe(L(function(t){var e=p(t,2);return e[0]?e[1]:[]}))}var Lt=function(){function r(t){o(this,r),this.config=t,this.theme=t.theme,this.scrollArr=[]}return t(r,[{key:"init",value:function(){var e=this,n=r.utils,t={smoothScroll:function(){$(".toc-link").on("click",function(){$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top-200})})},picPos:function(){var e=this;$(".post-content").each(function(){$(this).find("img").each(function(){$(this).parent("p").css("text-align","center");var t='<img src="'.concat(this.src,'"');e.theme.lazy&&(t='<img data-src="'.concat(this.src,'" class="lazyload"')),$(this).replaceWith('<a href="'.concat(this.src,'" data-title="').concat(this.alt,'" data-lightbox="group">').concat(t,' alt="').concat(this.alt,'"></a>'))})})},showComments:function(){var t=this;$("#com-switch").on("click",function(){n("iss","#post-comments").display()?($("#post-comments").css("display","block").addClass("syuanpi fadeInDown"),$(t).removeClass("syuanpi").css("transform","rotate(180deg)")):($(t).addClass("syuanpi").css("transform",""),n("cls","#post-comments").opreate("fadeInDown","remove"),n("ani","#post-comments").end("fadeOutUp",function(){$(this).css("display","none")}))})}};return r.opScroll(this.scrollArr),Object.values(t).forEach(function(t){return t.call(e)})}},{key:"back2top",value:function(){$(".toTop").on("click",function(){$("html, body").animate({scrollTop:0})})}},{key:"pushHeader",value:function(){var e=this.utils("cls","#mobile-header");this.scrollArr.push(function(t){e.opreate("header-scroll",5<t?"add":"remove")})}},{key:"updateRound",value:function(t){var e=Math.floor(t/($(document).height()-$(window).height())*100);$("#scrollpercent").html(e)}},{key:"showToc",value:function(){var s=r.utils,u=$(".toc-link"),c=$(".headerlink");this.scrollArr.push(function(e){var t=$.map(c,function(t){return $(t).offset().top});$(".title-link a").each(function(){var t=s("cls",this);0<=e&&e<230?t.opreate("active"):t.opreate("active","remove")});for(var n=0;n<u.length;n++){var r=t[n],o=n+1===u.length?1/0:t[n+1],i=s("cls",u[n]);r<e+210&&e+210<=o?i.opreate("active"):i.opreate("active","remove")}})}},{key:"titleStatus",value:function(){var e,n=document.title;document.addEventListener("visibilitychange",function(){var t=Math.floor($(window).scrollTop()/($(document).height()-$(window).height())*100);$(document).height()-$(window).height()==0&&(function(t){throw new Error('"'+t+'" is read-only')}("sct"),t=100),document.hidden?(clearTimeout(e),document.title="Read "+t+"% · "+n):(document.title="Welcome Back · "+n,e=setTimeout(function(){document.title=n},3e3))})}},{key:"showReward",value:function(){var t,e;this.theme.reward&&(e=(t=r.utils)("ani","#reward-btn"),$("#reward-btn").click(function(){t("iss","#reward-wrapper").display()?($("#reward-wrapper").css("display","flex"),e.end("clarity")):e.end("melt",function(){$("#reward-wrapper").hide()})}))}},{key:"listenExit",value:function(t,e){Q(t,"keydown").pipe(Z(function(t){return 27===t.keyCode})).subscribe(function(){return e()})}},{key:"depth",value:function(t,e){var n=this.utils,r=n("cls","body"),o=n("cls",".container-inner");r.exist("under")?(r.opreate("under","remove"),o.opreate("under","remove"),e.call(this)):(r.opreate("under","add"),o.opreate("under","add"),t.call(this))}},{key:"tagcloud",value:function(){function e(){i.opreate("shuttleIn","remove"),s.end("zoomOut",function(){i.opreate("syuanpi show","remove")})}function t(){n.depth(function(){return i.opreate("syuanpi shuttleIn show")},e)}var n=this,r=this.utils,o=$("#tags"),i=r("cls","#tagcloud"),s=r("ani","#tagcloud"),u=r("cls","#search"),c=r("ani","#search");this.listenExit(o,t),this.listenExit(document.getElementsByClassName("tagcloud-taglist"),t),o.on("click",function(){return u.exist("show")?(i.opreate("syuanpi shuttleIn show"),u.opreate("shuttleIn","remove"),void c.end("zoomOut",function(){u.opreate("syuanpi show","remove")})):void t()}),$("#tagcloud").on("click",function(t){t.stopPropagation(),"DIV"===t.target.tagName&&n.depth(function(){return i.opreate("syuanpi shuttleIn show")},e)});var a=Q(document.querySelectorAll(".tagcloud-tag button"),"click").pipe(L(function(t){return t.target})),l=K(document.querySelectorAll(".tagcloud-postlist")),h=l.pipe(L(function(t){return t.classList.remove("active")}));nt(a.pipe(ht(function(){return h})),a).pipe(L(function(t){var e=p(t,2);return e[1]}),ht(function(e){return l.pipe(Z(function(t){return t.firstElementChild.innerHTML.trim()===e.innerHTML.trim()}))})).subscribe(function(t){return t.classList.add("active")})}},{key:"search",value:function(){var t,e,r,n,o,i,s,u,c,a=this;this.theme.search&&($("body").append('<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"><\/script>'),t=this.utils,e=$("#search-btn"),r=$("#search-result"),n=t("cls","#search"),o=t("ani","#search"),i=t("cls","#tagcloud"),s=t("ani","#tagcloud"),u=function(){n.opreate("shuttleIn","remove"),o.end("zoomOut",function(){n.opreate("syuanpi show","remove")})},c=function(){a.depth(function(){return n.opreate("syuanpi shuttleIn show")},u)},this.listenExit(document.getElementById("search"),c),e.on("click",function(){return i.exist("show")?(n.opreate("syuanpi shuttleIn show"),i.opreate("shuttleIn","remove"),void s.end("zoomOut",function(){i.opreate("syuanpi show","remove")})):void c()}),$("#search").on("click",function(t){t.stopPropagation(),"DIV"===t.target.tagName&&a.depth(function(){return n.opreate("syuanpi shuttleIn show")},u)}),qt("".concat(this.config.baseUrl,"search.xml"),"search-input").subscribe(function(t){var e,n=t.map(function(t){var e=t.title,n=t.content;return'\n          <li class="search-result-item">\n            <a href="'.concat(t.url,'"><h2>').concat(e,"</h2></a>\n            <p>").concat(n,"</p>\n          </li>\n        ")});r.html((e=n.join(""),'<ul class="search-result-list syuanpi fadeInUpShort">'.concat(e,"</ul>")))}))}},{key:"headerMenu",value:function(){var t=this,e=this.utils,n=e("cls",".mobile-header-body"),r=e("cls",".header-menu-line"),o=$("#mobile-tags"),i=e("cls","#tagcloud");o.on("click",function(){n.opreate("show","remove"),r.opreate("show","remove"),i.opreate("syuanpi shuttleIn show")}),$("#mobile-left").on("click",function(){t.depth(function(){n.opreate("show"),r.opreate("show")},function(){n.opreate("show","remove"),r.opreate("show","remove")})})}},{key:"pjax",value:function(){var t,e,n,r;this.theme.pjax&&(e=(t=this.utils)("cls",".container-inner"),n=t("cls",".header"),r=t("cls",".header-wrapper"),$(document).pjax(".container-inner a",".container-inner",{fragment:"container-inner"}),$(document).on("pjax:send",function(){e.opreate("syuanpi fadeOutLeftShort"),r.opreate("syuanpi fadeOutLeftShort"),n.opreate("melt")}))}},{key:"bootstarp",value:function(){this.showToc(),this.back2top(),this.switchToc(),this.init(),this.pushHeader(),this.tagcloud(),this.search(),this.showReward(),this.headerMenu(),this.pjax()}}],[{key:"utils",value:function(t,e){var n=this,r=function(n){return{opreate:function(t,e){return"remove"===e?$(n).removeClass(t):$(n).addClass(t)},exist:function(t){return $(n).hasClass(t)}}};return{cls:r,iss:function(t){return{banderole:function(){return"banderole"===n.theme.scheme},balance:function(){return"balance"===n.theme.scheme},display:function(){return"none"===$(t).css("display")}}},ani:function(n){return{close:function(){return r.opreate(".syuanpi","syuanpi","remove")},end:function(t,e){$(n).addClass(t).one("webkitAnimationEnd AnimationEnd",function(){$(n).removeClass(t),e&&e.call(null,n)})}}}}[t](e)}},{key:"opScroll",value:function(t){var e=Q(window,"scroll").pipe(L(function(t){return t.target.scrollingElement.scrollTop}));t.length&&e.subscribe(function(e){return t.forEach(function(t){return t(e)})})}}]),r}();return function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(i,Lt);var n=a(i);function i(t){var e;return o(this,i),(e=n.call(this,t)).utils=Lt.utils,e}return t(i,[{key:"pushHeader",value:function(){var e,n,r,o;l(u(i.prototype),"pushHeader",this).call(this),this.utils("iss").banderole()&&(e=this.utils("cls","#header"),Q(window,"wheel").pipe((n=500,void 0===r&&(r=q),void 0===o&&(o=dt),function(t){return t.lift(new yt(n,r,o.leading,o.trailing))}),L(function(t){return 0<t.deltaY})).subscribe(function(t){return e.opreate("header-hide",t?"add":"remove")}),this.scrollArr.push(function(t){e.opreate("header-scroll",50<t?"add":"remove")}))}},{key:"back2top",value:function(){var e=this,n=this.utils("cls","#backtop");this.scrollArr.push(function(t){110<t?(n.opreate("clarity","add"),n.opreate("melt","remove")):(n.opreate("melt"),n.opreate("clarity","remove")),e.updateRound(t)}),l(u(i.prototype),"back2top",this).call(this)}},{key:"switchToc",value:function(){var t=this.utils,e=t("cls",".toc-inner"),n=t("cls",".post-toc .title"),r=t("cls",".container-inner");$(".post-toc .title").on("click",function(){n.exist("show")?(n.opreate("show","remove"),e.opreate("show","remove"),r.opreate("has_toc","remove")):(n.opreate("show"),e.opreate("show"),r.opreate("has_toc"))})}}]),i}()});
